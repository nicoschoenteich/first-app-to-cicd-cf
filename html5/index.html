<h1>Hello BTPcon!</h1>

<p>Why not check out one of these SAP CodeJam repositories?</p>

<ul id="myList"></ul>

<script type="module">

    const main = async () => {
        const response = await fetch("/github-api/orgs/SAP-Samples/repos?sort=updated&per_page=100")
        const result = await response.json()
        const repos = result.filter(repo => repo.name.includes("codejam"))
        const myList = document.getElementById("myList")
        for (let i = 0; i < repos.length; i++) {
            const newListItem = document.createElement("li")
            const newLink = document.createElement("a")
            newLink.textContent = repos[i].html_url
            newLink.href = repos[i].html_url
            newListItem.appendChild(newLink)
            myList.appendChild(newListItem)
        }
    }
    main()
    const user = async () => {
        const response = await fetch("/user-api/currentUser")
        const result = await response.json()
        document.getElementsByTagName("h1")[0].textContent = `Hello ${result.firstname}!`
    }
    user()
</script>